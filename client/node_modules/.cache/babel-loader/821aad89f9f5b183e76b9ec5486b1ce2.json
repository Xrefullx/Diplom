{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\XreFullx\\\\Desktop\\\\TrelloClone2\\\\client\\\\src\\\\components\\\\board\\\\DropWrapper.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport TASK_TYPE from \"../data/types\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DropWrapper = _ref => {\n  _s();\n  let {\n    onDrop,\n    children,\n    status\n  } = _ref;\n  const [statuses, setStatus] = useState([]);\n  useEffect(() => {\n    let isActive = true;\n    axios.get(\"https://help-maxbonus.ru/api/status\").then(data => {\n      var _data$data;\n      if (isActive) setStatus(data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.statuses);\n    });\n    return () => {\n      isActive = false;\n    };\n  });\n  const [{\n    isOver\n  }, drop] = useDrop({\n    accept: TASK_TYPE,\n    canDrop: (item, monitor) => {\n      const itemIndex = statuses.findIndex(si => item.id_status === si.idStatus);\n      const statusIndex = statuses.findIndex(si => si.idStatus === status.idStatus);\n      return [itemIndex + 1, itemIndex - 1, itemIndex].includes(statusIndex);\n    },\n    drop: (item, monitor) => {\n      onDrop(item, monitor, status);\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver()\n    })\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drop,\n    className: \"drop-wrapper\",\n    children: /*#__PURE__*/React.cloneElement(children, {\n      isOver\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n_s(DropWrapper, \"uya1fvl05DWXFIG+qyGi9p2gxAg=\", false, function () {\n  return [useDrop];\n});\n_c = DropWrapper;\nexport default DropWrapper;\nvar _c;\n$RefreshReg$(_c, \"DropWrapper\");","map":{"version":3,"names":["React","useState","useEffect","useDrop","TASK_TYPE","axios","jsxDEV","_jsxDEV","DropWrapper","_ref","_s","onDrop","children","status","statuses","setStatus","isActive","get","then","data","_data$data","isOver","drop","accept","canDrop","item","monitor","itemIndex","findIndex","si","id_status","idStatus","statusIndex","includes","collect","ref","className","cloneElement","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/XreFullx/Desktop/TrelloClone2/client/src/components/board/DropWrapper.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport TASK_TYPE from \"../data/types\";\r\nimport axios from 'axios';\r\n\r\n\r\n\r\nconst DropWrapper = ({ onDrop, children, status }) => {\r\n\r\n    const [statuses, setStatus] = useState([]);\r\n    useEffect(()=>{\r\n      let isActive = true;\r\n      axios\r\n      .get(\"https://help-maxbonus.ru/api/status\")\r\n      .then(data =>{\r\n        if (isActive) setStatus(data?.data?.statuses);\r\n      });\r\n      return () => { isActive = false };\r\n    })\r\n\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: TASK_TYPE,\r\n        canDrop: (item, monitor) => {\r\n            const itemIndex = statuses.findIndex(si => item.id_status === si.idStatus);\r\n            const statusIndex = statuses.findIndex(si => si.idStatus === status.idStatus);\r\n            return [itemIndex + 1, itemIndex - 1, itemIndex].includes(statusIndex);\r\n        },\r\n        drop: (item, monitor) => {\r\n            onDrop(item, monitor, status);\r\n        },\r\n        collect: monitor => ({\r\n            isOver: monitor.isOver()\r\n        })\r\n    });\r\n\r\n    return (\r\n        <div ref={drop} className={\"drop-wrapper\"}>\r\n            {React.cloneElement(children, { isOver })}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default DropWrapper;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,OAAO,QAAQ,WAAW;AACnC,OAAOC,SAAS,MAAM,eAAe;AACrC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAI1B,MAAMC,WAAW,GAAGC,IAAA,IAAkC;EAAAC,EAAA;EAAA,IAAjC;IAAEC,MAAM;IAAEC,QAAQ;IAAEC;EAAO,CAAC,GAAAJ,IAAA;EAE7C,MAAM,CAACK,QAAQ,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC1CC,SAAS,CAAC,MAAI;IACZ,IAAIc,QAAQ,GAAG,IAAI;IACnBX,KAAK,CACJY,GAAG,CAAC,qCAAqC,CAAC,CAC1CC,IAAI,CAACC,IAAI,IAAG;MAAA,IAAAC,UAAA;MACX,IAAIJ,QAAQ,EAAED,SAAS,CAACI,IAAI,aAAJA,IAAI,wBAAAC,UAAA,GAAJD,IAAI,CAAEA,IAAI,cAAAC,UAAA,uBAAVA,UAAA,CAAYN,QAAQ,CAAC;IAC/C,CAAC,CAAC;IACF,OAAO,MAAM;MAAEE,QAAQ,GAAG,KAAK;IAAC,CAAC;EACnC,CAAC,CAAC;EAEF,MAAM,CAAC;IAAEK;EAAO,CAAC,EAAEC,IAAI,CAAC,GAAGnB,OAAO,CAAC;IAC/BoB,MAAM,EAAEnB,SAAS;IACjBoB,OAAO,EAAEA,CAACC,IAAI,EAAEC,OAAO,KAAK;MACxB,MAAMC,SAAS,GAAGb,QAAQ,CAACc,SAAS,CAACC,EAAE,IAAIJ,IAAI,CAACK,SAAS,KAAKD,EAAE,CAACE,QAAQ,CAAC;MAC1E,MAAMC,WAAW,GAAGlB,QAAQ,CAACc,SAAS,CAACC,EAAE,IAAIA,EAAE,CAACE,QAAQ,KAAKlB,MAAM,CAACkB,QAAQ,CAAC;MAC7E,OAAO,CAACJ,SAAS,GAAG,CAAC,EAAEA,SAAS,GAAG,CAAC,EAAEA,SAAS,CAAC,CAACM,QAAQ,CAACD,WAAW,CAAC;IAC1E,CAAC;IACDV,IAAI,EAAEA,CAACG,IAAI,EAAEC,OAAO,KAAK;MACrBf,MAAM,CAACc,IAAI,EAAEC,OAAO,EAAEb,MAAM,CAAC;IACjC,CAAC;IACDqB,OAAO,EAAER,OAAO,KAAK;MACjBL,MAAM,EAAEK,OAAO,CAACL,MAAM,CAAC;IAC3B,CAAC;EACL,CAAC,CAAC;EAEF,oBACId,OAAA;IAAK4B,GAAG,EAAEb,IAAK;IAACc,SAAS,EAAE,cAAe;IAAAxB,QAAA,eACrCZ,KAAK,CAACqC,YAAY,CAACzB,QAAQ,EAAE;MAAES;IAAO,CAAC;EAAC;IAAAiB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACxC,CAAC;AAEd,CAAC;AAAC/B,EAAA,CAjCIF,WAAW;EAAA,QAacL,OAAO;AAAA;AAAAuC,EAAA,GAbhClC,WAAW;AAmCjB,eAAeA,WAAW;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}