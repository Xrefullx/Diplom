{"ast":null,"code":"import _objectSpread from\"C:/Users/XreFullx/Desktop/TrelloClone2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/XreFullx/Desktop/TrelloClone2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useRef}from\"react\";import{useDrag,useDrop}from\"react-dnd\";import WIndow from\"./Window\";import TASK_TYPE from\"../data/types\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Item=function Item(_ref){var item=_ref.item,index=_ref.index,moveItem=_ref.moveItem,status=_ref.status;var ref=useRef(null);var _useDrop=useDrop({accept:TASK_TYPE,hover:function hover(item,monitor){if(!ref.current){return;}var dragIndex=item.index;var hoverIndex=index;if(dragIndex===hoverIndex){return;}var hoveredRect=ref.current.getBoundClientRect();var hoverMiddleY=(hoveredRect.bottom-hoveredRect.top)/2;var mousePosition=monitor.getClientOffset();var hoverClientY=mousePosition.y-hoveredRect.top;if(dragIndex<hoverIndex&&hoverClientY<hoverMiddleY){return;}if(dragIndex>hoverIndex&&hoverClientY<hoverMiddleY){return;}moveItem(dragIndex,hoverIndex);item.index=hoverIndex;}}),_useDrop2=_slicedToArray(_useDrop,2),drop=_useDrop2[1];var _useDrag=useDrag({type:TASK_TYPE,item:_objectSpread(_objectSpread({},item),{},{index:index}),collect:function collect(monitor){return{isDragging:monitor.isDragging()};}}),_useDrag2=_slicedToArray(_useDrag,2),isDragging=_useDrag2[0].isDragging,drag=_useDrag2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var onOpen=function onOpen(){return setShow(true);};var onClose=function onClose(){return setShow(false);};drag(drop(ref));return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{ref:ref,style:{opacity:isDragging?0:1},className:\"item\",onClick:onOpen,children:[/*#__PURE__*/_jsx(\"div\",{className:\"color-bar\",style:{backgroundColor:status.color}}),/*#__PURE__*/_jsx(\"p\",{className:\"item-title\",children:item.task_title}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-reason\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430: \"}),item.name_reason]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-fio\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0424\\u0418\\u041E: \"}),item.fio]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-phone\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D: \"}),item.phone]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-email\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"email: \"}),item.email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-company\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F: \"}),item.company_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-problem\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439: \"}),item.comment]})]})});};export default Item;","map":{"version":3,"names":["React","Fragment","useState","useRef","useDrag","useDrop","WIndow","TASK_TYPE","jsx","_jsx","jsxs","_jsxs","Item","_ref","item","index","moveItem","status","ref","_useDrop","accept","hover","monitor","current","dragIndex","hoverIndex","hoveredRect","getBoundClientRect","hoverMiddleY","bottom","top","mousePosition","getClientOffset","hoverClientY","y","_useDrop2","_slicedToArray","drop","_useDrag","type","_objectSpread","collect","isDragging","_useDrag2","drag","_useState","_useState2","show","setShow","onOpen","onClose","children","style","opacity","className","onClick","backgroundColor","color","task_title","name_reason","fio","phone","email","company_name","comment"],"sources":["C:/Users/XreFullx/Desktop/TrelloClone2/client/src/components/board/Item.js"],"sourcesContent":["import React, { Fragment, useState, useRef} from \"react\";\r\nimport {useDrag, useDrop} from \"react-dnd\";\r\nimport WIndow from \"./Window\";\r\nimport TASK_TYPE from \"../data/types\";\r\n\r\nconst Item = ({item, index, moveItem, status}) => {\r\n  const ref = useRef(null);\r\n\r\n  const [, drop] = useDrop({\r\n    accept: TASK_TYPE,\r\n    hover(item, monitor) {\r\n      if (!ref.current){\r\n        return;\r\n      }\r\n\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index;\r\n\r\n      if (dragIndex === hoverIndex){\r\n        return\r\n      }\r\n\r\n      const hoveredRect = ref.current.getBoundClientRect();\r\n      const hoverMiddleY = (hoveredRect.bottom - hoveredRect.top) / 2;\r\n      const mousePosition = monitor.getClientOffset();\r\n      const hoverClientY = mousePosition.y - hoveredRect.top;\r\n\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY){\r\n        return;\r\n      }\r\n\r\n      if (dragIndex > hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n\r\n      moveItem(dragIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n\r\n    }\r\n  });\r\n\r\n  const [{ isDragging}, drag] = useDrag({\r\n    type: TASK_TYPE, \r\n    item: {...item, index},\r\n     collect: monitor => ({\r\n      isDragging: monitor.isDragging()\r\n     })\r\n  })\r\n\r\n  const [show, setShow] = useState(false);\r\n  const onOpen = () => setShow(true);\r\n  \r\n  const onClose = () => setShow(false);\r\n\r\n  drag(drop(ref));\r\n\r\n  return (\r\n    <Fragment>\r\n      <div\r\n          ref={ref}\r\n          style={{ opacity: isDragging ? 0 : 1 }}\r\n          className={\"item\"}\r\n          onClick={onOpen}\r\n>\r\n        <div className={\"color-bar\"} style={{backgroundColor: status.color} }></div>\r\n        <p className = {\"item-title\"}>{item.task_title}</p>\r\n        <p className = {\"item-reason\"}><b>Причина: </b>{item.name_reason}</p>\r\n        <p className = {\"item-fio\"}><b>ФИО: </b>{item.fio}</p>\r\n        <p className = {\"item-phone\"}><b>Телефон: </b>{item.phone}</p>\r\n        <p className = {\"item-email\"}><b>email: </b>{item.email}</p>\r\n        <p className = {\"item-company\"}><b>Компания: </b>{item.company_name}</p>\r\n        <p className = {\"item-problem\"}><b>Комментарий: </b>{item.comment}</p>\r\n      </div>\r\n\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Item;"],"mappings":"qQAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,QAAQ,CAAEC,MAAM,KAAO,OAAO,CACxD,OAAQC,OAAO,CAAEC,OAAO,KAAO,WAAW,CAC1C,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,SAAS,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtC,GAAM,CAAAC,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAAC,IAAA,CAAwC,IAAnC,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,KAAK,CAAAF,IAAA,CAALE,KAAK,CAAEC,QAAQ,CAAAH,IAAA,CAARG,QAAQ,CAAEC,MAAM,CAAAJ,IAAA,CAANI,MAAM,CAC1C,GAAM,CAAAC,GAAG,CAAGf,MAAM,CAAC,IAAI,CAAC,CAExB,IAAAgB,QAAA,CAAiBd,OAAO,CAAC,CACvBe,MAAM,CAAEb,SAAS,CACjBc,KAAK,UAAAA,MAACP,IAAI,CAAEQ,OAAO,CAAE,CACnB,GAAI,CAACJ,GAAG,CAACK,OAAO,CAAC,CACf,OACF,CAEA,GAAM,CAAAC,SAAS,CAAGV,IAAI,CAACC,KAAK,CAC5B,GAAM,CAAAU,UAAU,CAAGV,KAAK,CAExB,GAAIS,SAAS,GAAKC,UAAU,CAAC,CAC3B,OACF,CAEA,GAAM,CAAAC,WAAW,CAAGR,GAAG,CAACK,OAAO,CAACI,kBAAkB,CAAC,CAAC,CACpD,GAAM,CAAAC,YAAY,CAAG,CAACF,WAAW,CAACG,MAAM,CAAGH,WAAW,CAACI,GAAG,EAAI,CAAC,CAC/D,GAAM,CAAAC,aAAa,CAAGT,OAAO,CAACU,eAAe,CAAC,CAAC,CAC/C,GAAM,CAAAC,YAAY,CAAGF,aAAa,CAACG,CAAC,CAAGR,WAAW,CAACI,GAAG,CAEtD,GAAIN,SAAS,CAAGC,UAAU,EAAIQ,YAAY,CAAGL,YAAY,CAAC,CACxD,OACF,CAEA,GAAIJ,SAAS,CAAGC,UAAU,EAAIQ,YAAY,CAAGL,YAAY,CAAE,CACzD,OACF,CAEAZ,QAAQ,CAACQ,SAAS,CAAEC,UAAU,CAAC,CAC/BX,IAAI,CAACC,KAAK,CAAGU,UAAU,CAEzB,CACF,CAAC,CAAC,CAAAU,SAAA,CAAAC,cAAA,CAAAjB,QAAA,IA/BOkB,IAAI,CAAAF,SAAA,IAiCb,IAAAG,QAAA,CAA8BlC,OAAO,CAAC,CACpCmC,IAAI,CAAEhC,SAAS,CACfO,IAAI,CAAA0B,aAAA,CAAAA,aAAA,IAAM1B,IAAI,MAAEC,KAAK,CAALA,KAAK,EAAC,CACrB0B,OAAO,CAAE,SAAAA,QAAAnB,OAAO,QAAK,CACpBoB,UAAU,CAAEpB,OAAO,CAACoB,UAAU,CAAC,CAChC,CAAC,EACJ,CAAC,CAAC,CAAAC,SAAA,CAAAP,cAAA,CAAAE,QAAA,IANOI,UAAU,CAAAC,SAAA,IAAVD,UAAU,CAAGE,IAAI,CAAAD,SAAA,IAQ1B,IAAAE,SAAA,CAAwB3C,QAAQ,CAAC,KAAK,CAAC,CAAA4C,UAAA,CAAAV,cAAA,CAAAS,SAAA,IAAhCE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,GAAM,CAAAG,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,QAAS,CAAAD,OAAO,CAAC,IAAI,CAAC,GAElC,GAAM,CAAAE,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,QAAS,CAAAF,OAAO,CAAC,KAAK,CAAC,GAEpCJ,IAAI,CAACP,IAAI,CAACnB,GAAG,CAAC,CAAC,CAEf,mBACET,IAAA,CAACR,QAAQ,EAAAkD,QAAA,cACPxC,KAAA,QACIO,GAAG,CAAEA,GAAI,CACTkC,KAAK,CAAE,CAAEC,OAAO,CAAEX,UAAU,CAAG,CAAC,CAAG,CAAE,CAAE,CACvCY,SAAS,CAAE,MAAO,CAClBC,OAAO,CAAEN,MAAO,CAAAE,QAAA,eAElB1C,IAAA,QAAK6C,SAAS,CAAE,WAAY,CAACF,KAAK,CAAE,CAACI,eAAe,CAAEvC,MAAM,CAACwC,KAAK,CAAG,CAAM,CAAC,cAC5EhD,IAAA,MAAG6C,SAAS,CAAI,YAAa,CAAAH,QAAA,CAAErC,IAAI,CAAC4C,UAAU,CAAI,CAAC,cACnD/C,KAAA,MAAG2C,SAAS,CAAI,aAAc,CAAAH,QAAA,eAAC1C,IAAA,MAAA0C,QAAA,CAAG,8CAAS,CAAG,CAAC,CAACrC,IAAI,CAAC6C,WAAW,EAAI,CAAC,cACrEhD,KAAA,MAAG2C,SAAS,CAAI,UAAW,CAAAH,QAAA,eAAC1C,IAAA,MAAA0C,QAAA,CAAG,sBAAK,CAAG,CAAC,CAACrC,IAAI,CAAC8C,GAAG,EAAI,CAAC,cACtDjD,KAAA,MAAG2C,SAAS,CAAI,YAAa,CAAAH,QAAA,eAAC1C,IAAA,MAAA0C,QAAA,CAAG,8CAAS,CAAG,CAAC,CAACrC,IAAI,CAAC+C,KAAK,EAAI,CAAC,cAC9DlD,KAAA,MAAG2C,SAAS,CAAI,YAAa,CAAAH,QAAA,eAAC1C,IAAA,MAAA0C,QAAA,CAAG,SAAO,CAAG,CAAC,CAACrC,IAAI,CAACgD,KAAK,EAAI,CAAC,cAC5DnD,KAAA,MAAG2C,SAAS,CAAI,cAAe,CAAAH,QAAA,eAAC1C,IAAA,MAAA0C,QAAA,CAAG,oDAAU,CAAG,CAAC,CAACrC,IAAI,CAACiD,YAAY,EAAI,CAAC,cACxEpD,KAAA,MAAG2C,SAAS,CAAI,cAAe,CAAAH,QAAA,eAAC1C,IAAA,MAAA0C,QAAA,CAAG,sEAAa,CAAG,CAAC,CAACrC,IAAI,CAACkD,OAAO,EAAI,CAAC,EACnE,CAAC,CAEE,CAAC,CAEf,CAAC,CAED,cAAe,CAAApD,IAAI"},"metadata":{},"sourceType":"module"}