{"ast":null,"code":"import _slicedToArray from\"C:/Users/XreFullx/Desktop/TrelloClone2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useDrop}from\"react-dnd\";import TASK_TYPE from\"../data/types\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var DropWrapper=function DropWrapper(_ref){var onDrop=_ref.onDrop,children=_ref.children,status=_ref.status;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),statuses=_useState2[0],setStatus=_useState2[1];useEffect(function(){var isActive=true;axios.get(\"https://help-maxbonus.ru/api/status\").then(function(data){var _data$data;if(isActive)setStatus(data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.statuses);});return function(){isActive=false;};});var _useDrop=useDrop({accept:TASK_TYPE,canDrop:function canDrop(item,monitor){var itemIndex=statuses.findIndex(function(si){return item.id_status===si.idStatus;});var statusIndex=statuses.findIndex(function(si){return si.idStatus===status.idStatus;});return[itemIndex+1,itemIndex-1,itemIndex].includes(statusIndex);},drop:function drop(item,monitor){onDrop(item,monitor,status);},collect:function collect(monitor){return{isOver:monitor.isOver()};}}),_useDrop2=_slicedToArray(_useDrop,2),isOver=_useDrop2[0].isOver,drop=_useDrop2[1];return/*#__PURE__*/_jsx(\"div\",{ref:drop,className:\"drop-wrapper\",children:/*#__PURE__*/React.cloneElement(children,{isOver:isOver})});};export default DropWrapper;","map":{"version":3,"names":["React","useState","useEffect","useDrop","TASK_TYPE","axios","jsx","_jsx","DropWrapper","_ref","onDrop","children","status","_useState","_useState2","_slicedToArray","statuses","setStatus","isActive","get","then","data","_data$data","_useDrop","accept","canDrop","item","monitor","itemIndex","findIndex","si","id_status","idStatus","statusIndex","includes","drop","collect","isOver","_useDrop2","ref","className","cloneElement"],"sources":["C:/Users/XreFullx/Desktop/TrelloClone2/client/src/components/board/DropWrapper.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport TASK_TYPE from \"../data/types\";\r\nimport axios from 'axios';\r\n\r\n\r\n\r\nconst DropWrapper = ({ onDrop, children, status }) => {\r\n\r\n    const [statuses, setStatus] = useState([]);\r\n    useEffect(()=>{\r\n      let isActive = true;\r\n      axios\r\n      .get(\"https://help-maxbonus.ru/api/status\")\r\n      .then(data =>{\r\n        if (isActive) setStatus(data?.data?.statuses);\r\n      });\r\n      return () => { isActive = false };\r\n    })\r\n\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: TASK_TYPE,\r\n        canDrop: (item, monitor) => {\r\n            const itemIndex = statuses.findIndex(si => item.id_status === si.idStatus);\r\n            const statusIndex = statuses.findIndex(si => si.idStatus === status.idStatus);\r\n            return [itemIndex + 1, itemIndex - 1, itemIndex].includes(statusIndex);\r\n        },\r\n        drop: (item, monitor) => {\r\n            onDrop(item, monitor, status);\r\n        },\r\n        collect: monitor => ({\r\n            isOver: monitor.isOver()\r\n        })\r\n    });\r\n\r\n    return (\r\n        <div ref={drop} className={\"drop-wrapper\"}>\r\n            {React.cloneElement(children, { isOver })}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default DropWrapper;"],"mappings":"mIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,WAAW,CACnC,MAAO,CAAAC,SAAS,KAAM,eAAe,CACrC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAI1B,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAAC,IAAA,CAAqC,IAA/B,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAAEC,MAAM,CAAAH,IAAA,CAANG,MAAM,CAE3C,IAAAC,SAAA,CAA8BZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,QAAQ,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IAC1BZ,SAAS,CAAC,UAAI,CACZ,GAAI,CAAAgB,QAAQ,CAAG,IAAI,CACnBb,KAAK,CACJc,GAAG,CAAC,qCAAqC,CAAC,CAC1CC,IAAI,CAAC,SAAAC,IAAI,CAAG,KAAAC,UAAA,CACX,GAAIJ,QAAQ,CAAED,SAAS,CAACI,IAAI,SAAJA,IAAI,kBAAAC,UAAA,CAAJD,IAAI,CAAEA,IAAI,UAAAC,UAAA,iBAAVA,UAAA,CAAYN,QAAQ,CAAC,CAC/C,CAAC,CAAC,CACF,MAAO,WAAM,CAAEE,QAAQ,CAAG,KAAK,CAAC,CAAC,CACnC,CAAC,CAAC,CAEF,IAAAK,QAAA,CAA2BpB,OAAO,CAAC,CAC/BqB,MAAM,CAAEpB,SAAS,CACjBqB,OAAO,CAAE,SAAAA,QAACC,IAAI,CAAEC,OAAO,CAAK,CACxB,GAAM,CAAAC,SAAS,CAAGZ,QAAQ,CAACa,SAAS,CAAC,SAAAC,EAAE,QAAI,CAAAJ,IAAI,CAACK,SAAS,GAAKD,EAAE,CAACE,QAAQ,GAAC,CAC1E,GAAM,CAAAC,WAAW,CAAGjB,QAAQ,CAACa,SAAS,CAAC,SAAAC,EAAE,QAAI,CAAAA,EAAE,CAACE,QAAQ,GAAKpB,MAAM,CAACoB,QAAQ,GAAC,CAC7E,MAAO,CAACJ,SAAS,CAAG,CAAC,CAAEA,SAAS,CAAG,CAAC,CAAEA,SAAS,CAAC,CAACM,QAAQ,CAACD,WAAW,CAAC,CAC1E,CAAC,CACDE,IAAI,CAAE,SAAAA,KAACT,IAAI,CAAEC,OAAO,CAAK,CACrBjB,MAAM,CAACgB,IAAI,CAAEC,OAAO,CAAEf,MAAM,CAAC,CACjC,CAAC,CACDwB,OAAO,CAAE,SAAAA,QAAAT,OAAO,QAAK,CACjBU,MAAM,CAAEV,OAAO,CAACU,MAAM,CAAC,CAC3B,CAAC,EACL,CAAC,CAAC,CAAAC,SAAA,CAAAvB,cAAA,CAAAQ,QAAA,IAbOc,MAAM,CAAAC,SAAA,IAAND,MAAM,CAAIF,IAAI,CAAAG,SAAA,IAevB,mBACI/B,IAAA,QAAKgC,GAAG,CAAEJ,IAAK,CAACK,SAAS,CAAE,cAAe,CAAA7B,QAAA,cACrCX,KAAK,CAACyC,YAAY,CAAC9B,QAAQ,CAAE,CAAE0B,MAAM,CAANA,MAAO,CAAC,CAAC,CACxC,CAAC,CAEd,CAAC,CAED,cAAe,CAAA7B,WAAW"},"metadata":{},"sourceType":"module"}