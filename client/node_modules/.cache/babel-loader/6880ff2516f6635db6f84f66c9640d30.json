{"ast":null,"code":"import _toConsumableArray from\"C:/Users/XreFullx/Desktop/TrelloClone2/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/XreFullx/Desktop/TrelloClone2/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/XreFullx/Desktop/TrelloClone2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{getTasks,getStatuses}from'../../actions/board';import React,{useState,useEffect}from\"react\";import Item from\"../board/Item\";import DropWrapper from\"../board/DropWrapper\";import Col from\"../board/Col\";import axios from'axios';import{DndProvider}from\"react-dnd\";import{HTML5Backend}from\"react-dnd-html5-backend\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Board=function Board(){console.log(document.classList);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),statuses=_useState2[0],setStatus=_useState2[1];useEffect(function(){axios.get(\"https://help-maxbonus.ru/api/status\").then(function(data){var _data$data;setStatus(data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.statuses);});;});var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),items=_useState4[0],setItems=_useState4[1];var fetchItemsData=function fetchItemsData(){fetch(\"https://help-maxbonus.ru/api/task\").then(function(response){return response.json();}).then(function(data){setItems(data===null||data===void 0?void 0:data.task_info);});};useEffect(function(){fetchItemsData();},[]);var onDrop=function onDrop(item,monitor,status){var mapping=statuses.find(function(si){return si.idStatus===status.idStatus;});setItems(function(prevState){var newItems=prevState.filter(function(i){return i.id!==item.id;}).concat(_objectSpread(_objectSpread({},item),{},{status:status}));return _toConsumableArray(newItems);});};var moveItem=function moveItem(dragIndex,hoverIndex){var item=items[dragIndex];setItems(function(prevState){var newItems=prevState.filter(function(i,idx){return idx!==dragIndex;});newItems.splice(hoverIndex,0,item);return _toConsumableArray(newItems);});};return/*#__PURE__*/_jsx(DndProvider,{backend:HTML5Backend,children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:statuses.map(function(s){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"col-header\",children:s.nameStatus.toUpperCase()}),/*#__PURE__*/_jsx(DropWrapper,{onDrop:onDrop,status:s.nameStatus,children:/*#__PURE__*/_jsx(Col,{children:items.filter(function(i){return i.id_status===s.idStatus;}).map(function(i,idx){return/*#__PURE__*/_jsx(Item,{item:i,index:idx,moveItem:moveItem,status:s},i.id);})})})]},\"status\".concat(s.idStatus));})})});};export default Board;","map":{"version":3,"names":["getTasks","getStatuses","React","useState","useEffect","Item","DropWrapper","Col","axios","DndProvider","HTML5Backend","jsx","_jsx","jsxs","_jsxs","Board","console","log","document","classList","_useState","_useState2","_slicedToArray","statuses","setStatus","get","then","data","_data$data","_useState3","_useState4","items","setItems","fetchItemsData","fetch","response","json","task_info","onDrop","item","monitor","status","mapping","find","si","idStatus","prevState","newItems","filter","i","id","concat","_objectSpread","_toConsumableArray","moveItem","dragIndex","hoverIndex","idx","splice","backend","children","className","map","s","nameStatus","toUpperCase","id_status","index"],"sources":["C:/Users/XreFullx/Desktop/TrelloClone2/client/src/components/pages/Board.js"],"sourcesContent":["import {getTasks,getStatuses } from '../../actions/board';\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Item from \"../board/Item\";\r\nimport DropWrapper from \"../board/DropWrapper\";\r\nimport Col from \"../board/Col\";\r\nimport axios from 'axios';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\r\n\r\n\r\nconst Board = () => {\r\n\r\n\r\n  console.log(document.classList);\r\n\r\n\r\n  const [statuses, setStatus] = useState([]);\r\n  useEffect(()=>{\r\n\r\n    axios\r\n    .get(\"https://help-maxbonus.ru/api/status\")\r\n    .then(data =>{\r\n       setStatus(data?.data?.statuses);\r\n    });\r\n    ;\r\n  })\r\n  \r\n  const [items, setItems] = useState([]);\r\n\r\n  const fetchItemsData = () => {\r\n    fetch(\"https://help-maxbonus.ru/api/task\")\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        setItems(data?.task_info)\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchItemsData();\r\n  }, [])\r\n\r\n\r\n  const onDrop = (item, monitor, status) => {\r\n    const mapping = statuses.find(si => si.idStatus === status.idStatus);\r\n\r\n    setItems(prevState => {\r\n        const newItems = prevState\r\n            .filter(i => i.id !== item.id)\r\n            .concat({ ...item, status});\r\n        return [ ...newItems ];\r\n    });\r\n};\r\n\r\nconst moveItem = (dragIndex, hoverIndex) => {\r\n    const item = items[dragIndex];\r\n    setItems(prevState => {\r\n        const newItems = prevState.filter((i, idx) => idx !== dragIndex);\r\n        newItems.splice(hoverIndex, 0, item);\r\n        return  [ ...newItems ];\r\n    });\r\n};\r\n\r\n\r\n\r\n    return (  \r\n      \r\n      <DndProvider backend={HTML5Backend} >\r\n        <div className={\"row\"}>\r\n        {statuses.map(s => {\r\n                return (\r\n                    \r\n                    <div key={`status${s.idStatus}`} className={\"col-wrapper\"}>\r\n                        <h2 className={\"col-header\"}>{s.nameStatus.toUpperCase()}</h2>\r\n                        <DropWrapper onDrop={onDrop} status={s.nameStatus}>\r\n                            <Col>\r\n                            {items\r\n                                    .filter(i => i.id_status === s.idStatus)\r\n                                    .map((i, idx) => <Item key={i.id} item={i} index={idx} moveItem={moveItem} status={s} />)\r\n                                }\r\n                            </Col>\r\n                        </DropWrapper>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n        </DndProvider>\r\n    );\r\n};\r\n\r\nexport default Board;"],"mappings":"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"},"metadata":{},"sourceType":"module"}